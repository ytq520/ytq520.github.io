<!DOCTYPE HTML>
<html>

<head><meta name="generator" content="Hexo 3.8.0">
	<link rel="bookmark" type="image/x-icon" href="/img/logo_miccall.png">
	<link rel="shortcut icon" href="/img/logo_miccall.png">
	
			    <title>
    ytq520
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="stylesheet" href="/css/mic_main.css">
    <link rel="stylesheet" href="/css/dropdownMenu.css">
    <meta name="keywords" content="miccall">
    
    	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	 
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css">
    </noscript>
    <style type="text/css">
        body:before {
          content: ' ';
          position: fixed;
          top: 0;
          background: url('/img/bg.jpg') center 0 no-repeat;
          right: 0;
          bottom: 0;
          left: 0;
          background-size: cover; 
        }
    </style>

			    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script async type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css">
<link rel="stylesheet" href="/css/typo.css">
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">ytq520</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special">
            <ul class="menu links">
			<!-- Homepage  主页  --> 
			<li>
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/Data-Analysis/">Data Analysis</a></li><li><a class="category-link" href="/categories/Django/">Django</a></li><li><a class="category-link" href="/categories/Flask/">Flask</a></li><li><a class="category-link" href="/categories/JavaScript/">JavaScript</a></li><li><a class="category-link" href="/categories/MySQL/">MySQL</a></li><li><a class="category-link" href="/categories/html/">html</a></li><li><a class="category-link" href="/categories/python基础/">python基础</a></li><li><a class="category-link" href="/categories/spider/">spider</a>
	                    </li></ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="标签">
		                标签
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
                    
                    <li>
                        <a title="github" href="https://github.com/ytq520" target="_blank" rel="noopener">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                    <li>
                        <a title="500px" href="http://500px.com" target="_blank" rel="noopener">
                            <i class="icon fa fa-500px"></i>
                        </a>
                    </li>
                    
			</ul>
</nav>

        <div id="main">
            <div class="post_page_title_img" style="height: 25rem;background-image: url(/images/thumbs/18.jpg);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;">
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2>session登录</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <p>###session登录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">from lxml import etree</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Login(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.headers = &#123;</span><br><span class="line">            &apos;Referer&apos;: &apos;https://github.com/&apos;,</span><br><span class="line">            &apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36&apos;,</span><br><span class="line">            &apos;Host&apos;: &apos;github.com&apos;</span><br><span class="line">        &#125;</span><br><span class="line">        self.login_url = &apos;https://github.com/login&apos;</span><br><span class="line">        self.post_url = &apos;https://github.com/session&apos;</span><br><span class="line">        self.logined_url = &apos;https://github.com/settings/profile&apos;</span><br><span class="line">        self.session = requests.Session()</span><br><span class="line">    </span><br><span class="line">    def token(self):</span><br><span class="line">        response = self.session.get(self.login_url, headers=self.headers)</span><br><span class="line">        selector = etree.HTML(response.text)</span><br><span class="line">        token = selector.xpath(&apos;//div//input[2]/@value&apos;)</span><br><span class="line">        return token</span><br><span class="line">    </span><br><span class="line">    def login(self, email, password):</span><br><span class="line">        post_data = &#123;</span><br><span class="line">            &apos;commit&apos;: &apos;Sign in&apos;,</span><br><span class="line">            &apos;utf8&apos;: &apos;✓&apos;,</span><br><span class="line">            &apos;authenticity_token&apos;: self.token()[0],</span><br><span class="line">            &apos;login&apos;: email,</span><br><span class="line">            &apos;password&apos;: password</span><br><span class="line">        &#125;</span><br><span class="line">        response = self.session.post(self.post_url, data=post_data, headers=self.headers)</span><br><span class="line">        # print(response.text)</span><br><span class="line"></span><br><span class="line">        if response.status_code == 200:</span><br><span class="line">            self.dynamics(response.text)</span><br><span class="line">    </span><br><span class="line">    def dynamics(self, html):</span><br><span class="line">        selector = etree.HTML(html)</span><br><span class="line">        dynamics = selector.xpath(&apos;//a[contains(@class, &quot;user-profile-link&quot;)]//strong[contains(@class, &quot;css-truncate-target&quot;)]//text()&apos;)[0]</span><br><span class="line">        print(dynamics)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    login = Login()</span><br><span class="line">    login.login(email=&apos;carmackxiao&apos;, password=&apos;Vff635241&apos;)</span><br></pre></td></tr></table></figure></p>
<p>###获取图片来破解验证码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.common.exceptions import TimeoutException</span><br><span class="line">from selenium.webdriver.common.by import By</span><br><span class="line">from selenium.webdriver.support.ui import WebDriverWait</span><br><span class="line">from selenium.webdriver.support import expected_conditions as EC</span><br><span class="line">import time</span><br><span class="line">from PIL import Image</span><br><span class="line">from io import BytesIO</span><br><span class="line">from chaojiying import main1</span><br><span class="line"></span><br><span class="line"># 取浏览器窗口内全图</span><br><span class="line">def get_big_image(browser):</span><br><span class="line">    # browser.execute_script(&apos;window.scrollTo(0, 300)&apos;)</span><br><span class="line">    screenshot = browser.get_screenshot_as_png()</span><br><span class="line">    screenshot = Image.open(BytesIO(screenshot))</span><br><span class="line">    return screenshot</span><br><span class="line"></span><br><span class="line">def get_captha_position(browser, class_str):</span><br><span class="line">    wait = WebDriverWait(browser, 5)</span><br><span class="line">    captha = wait.until(EC.presence_of_element_located</span><br><span class="line">                       ((By.CSS_SELECTOR, class_str)))</span><br><span class="line">    location = captha.location</span><br><span class="line">    size = captha.size</span><br><span class="line">    x1 = location[&apos;x&apos;]</span><br><span class="line">    y1 = location[&apos;y&apos;]</span><br><span class="line">    width = size[&apos;width&apos;]</span><br><span class="line">    height = size[&apos;height&apos;]</span><br><span class="line">    x2 = x1 + width</span><br><span class="line">    y2 = y1 + height</span><br><span class="line">    print(x1, y1, x2, y2)</span><br><span class="line">    print(width, height)</span><br><span class="line">    return (x1, y1, x2, y2)</span><br><span class="line"></span><br><span class="line">def get_captcha(browser, class_str):</span><br><span class="line">    full_screen_img = get_big_image(browser)</span><br><span class="line">    full_screen_img.save(&apos;mobile_login.png&apos;)</span><br><span class="line"></span><br><span class="line">    # 获取验证码左上角和右下角坐标</span><br><span class="line">    x1, y1, x2, y2 = get_captha_position(browser, class_str)</span><br><span class="line"></span><br><span class="line">    captha_img = full_screen_img.crop((x1, y1, x2, y2))</span><br><span class="line">    captha_img.save(&apos;mobile_captha.png&apos;)</span><br><span class="line">    captha_str = main1(&apos;mobile_captha.png&apos;)</span><br><span class="line">    return captha_str</span><br></pre></td></tr></table></figure></p>
<p>###短信破解<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"># python3.5</span><br><span class="line"></span><br><span class="line"># 易码短信服务平台开放接口范例代码</span><br><span class="line"># 语言版本：python版</span><br><span class="line"># 官方网址：www.51ym.me</span><br><span class="line"># 技术支持QQ：2114927217</span><br><span class="line"># 发布时间：217-12-11</span><br><span class="line"></span><br><span class="line">from urllib import parse, request</span><br><span class="line">import time</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">header_dict = &#123;</span><br><span class="line">    &apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko&apos;&#125;</span><br><span class="line"></span><br><span class="line"># 登陆/获取TOKEN</span><br><span class="line">username = &apos;carmack&apos;  # 账号</span><br><span class="line">password = &apos;Vff123456&apos;  # 密码</span><br><span class="line">url =  &apos;http://api.fxhyd.cn/UserInterface.aspx?action=login&amp;username=&apos; + \</span><br><span class="line">    username+&apos;&amp;password=&apos;+password</span><br><span class="line">TOKEN1 = request.urlopen(request.Request(</span><br><span class="line">    url=url, headers=header_dict)).read().decode(encoding=&apos;utf-8&apos;)</span><br><span class="line">if TOKEN1.split(&apos;|&apos;)[0] == &apos;success&apos;:</span><br><span class="line">    TOKEN = TOKEN1.split(&apos;|&apos;)[1]</span><br><span class="line">    print(&apos;TOKEN是&apos;+TOKEN)</span><br><span class="line">else:</span><br><span class="line">    print(&apos;获取TOKEN错误,错误代码&apos;+TOKEN1+&apos;。代码释义：1001:参数token不能为空;1002:参数action不能为空;1003:参数action错误;1004:token失效;1005:用户名或密码错误;1006:用户名不能为空;1007:密码不能为空;1008:账户余额不足;1009:账户被禁用;1010:参数错误;1011:账户待审核;1012:登录数达到上限&apos;)</span><br><span class="line"></span><br><span class="line">TOKEN = &apos;01138099c52f07a264e5d5b27d17fb04e6b9a8dfb501&apos;  # 输入TOKEN</span><br><span class="line"># 获取账户信息</span><br><span class="line">url = &apos;http://api.fxhyd.cn/UserInterface.aspx?action=getaccountinfo&amp;token=&apos;+TOKEN+&apos;&amp;format=1&apos;</span><br><span class="line">ACCOUNT1 = request.urlopen(request.Request(</span><br><span class="line">    url=url, headers=header_dict)).read().decode(encoding=&apos;utf-8&apos;)</span><br><span class="line">if ACCOUNT1.split(&apos;|&apos;)[0] == &apos;success&apos;:</span><br><span class="line">    ACCOUNT = ACCOUNT1.split(&apos;|&apos;)[1]</span><br><span class="line">    print(ACCOUNT)</span><br><span class="line">else:</span><br><span class="line">    print(&apos;获取TOKEN错误,错误代码&apos;+ACCOUNT1)</span><br><span class="line"></span><br><span class="line">ITEMID = &apos;694&apos;  # 项目编号</span><br><span class="line">EXCLUDENO = &apos;&apos;  # 排除号段170_171</span><br><span class="line"></span><br><span class="line"># # 获取手机号码</span><br><span class="line"># ITEMID = &apos;694&apos;  # 项目编号</span><br><span class="line"># EXCLUDENO = &apos;&apos;  # 排除号段170_171</span><br><span class="line"># url = &apos;http://api.fxhyd.cn/UserInterface.aspx?action=getmobile&amp;token=&apos; + \</span><br><span class="line">#     TOKEN+&apos;&amp;itemid=&apos;+ITEMID+&apos;&amp;excludeno=&apos;+EXCLUDENO</span><br><span class="line"># MOBILE1 = request.urlopen(request.Request(</span><br><span class="line">#     url=url, headers=header_dict)).read().decode(encoding=&apos;utf-8&apos;)</span><br><span class="line"># if MOBILE1.split(&apos;|&apos;)[0] == &apos;success&apos;:</span><br><span class="line">#     MOBILE = MOBILE1.split(&apos;|&apos;)[1]</span><br><span class="line">#     print(&apos;获取号码是:\n&apos;+MOBILE)</span><br><span class="line"># else:</span><br><span class="line">#     print(&apos;获取TOKEN错误,错误代码&apos;+MOBILE1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_mobile():</span><br><span class="line">    # 获取手机号码</span><br><span class="line">    url = &apos;http://api.fxhyd.cn/UserInterface.aspx?action=getmobile&amp;token=&apos; + \</span><br><span class="line">        TOKEN+&apos;&amp;itemid=&apos;+ITEMID+&apos;&amp;excludeno=&apos;+EXCLUDENO</span><br><span class="line">    MOBILE1 = request.urlopen(request.Request(</span><br><span class="line">        url=url, headers=header_dict)).read().decode(encoding=&apos;utf-8&apos;)</span><br><span class="line">    if MOBILE1.split(&apos;|&apos;)[0] == &apos;success&apos;:</span><br><span class="line">        MOBILE = MOBILE1.split(&apos;|&apos;)[1]</span><br><span class="line">        print(&apos;获取号码是:\n&apos;+MOBILE)</span><br><span class="line">        return MOBILE</span><br><span class="line">    else:</span><br><span class="line">        print(&apos;获取TOKEN错误,错误代码&apos;+MOBILE1)</span><br><span class="line"></span><br><span class="line">def release_mobile(MOBILE):</span><br><span class="line">    # 释放号码</span><br><span class="line">    url = &apos;http://api.fxhyd.cn/UserInterface.aspx?action=release&amp;token=&apos; + \</span><br><span class="line">        TOKEN+&apos;&amp;itemid=&apos;+ITEMID+&apos;&amp;mobile=&apos;+MOBILE</span><br><span class="line">    RELEASE = request.urlopen(request.Request(</span><br><span class="line">        url=url, headers=header_dict)).read().decode(encoding=&apos;utf-8&apos;)</span><br><span class="line">    if RELEASE == &apos;success&apos;:</span><br><span class="line">        print(&apos;号码成功释放&apos;)</span><br><span class="line"></span><br><span class="line">def get_sms_message(MOBILE):</span><br><span class="line">    # 获取短信，注意线程挂起5秒钟，每次取短信最少间隔5秒</span><br><span class="line">    WAIT = 100  # 接受短信时长60s</span><br><span class="line">    url = &apos;http://api.fxhyd.cn/UserInterface.aspx?action=getsms&amp;token=&apos; + \</span><br><span class="line">        TOKEN+&apos;&amp;itemid=&apos;+ITEMID+&apos;&amp;mobile=&apos;+MOBILE+&apos;&amp;release=1&apos;</span><br><span class="line">    text1 = request.urlopen(request.Request(</span><br><span class="line">        url=url, headers=header_dict)).read().decode(encoding=&apos;utf-8&apos;)</span><br><span class="line">    TIME1 = time.time()</span><br><span class="line">    TIME2 = time.time()</span><br><span class="line">    ROUND = 1</span><br><span class="line">    while (TIME2-TIME1) &lt; WAIT and not text1.split(&apos;|&apos;)[0] == &quot;success&quot;:</span><br><span class="line">        time.sleep(5)</span><br><span class="line">        text1 = request.urlopen(request.Request(</span><br><span class="line">            url=url, headers=header_dict)).read().decode(encoding=&apos;utf-8&apos;)</span><br><span class="line">        TIME2 = time.time()</span><br><span class="line">        ROUND = ROUND+1</span><br><span class="line"></span><br><span class="line">    ROUND = str(ROUND)</span><br><span class="line">    if text1.split(&apos;|&apos;)[0] == &quot;success&quot;:</span><br><span class="line">        text = text1.split(&apos;|&apos;)[1]</span><br><span class="line">        TIME = str(round(TIME2-TIME1, 1))</span><br><span class="line">        print(&apos;短信内容是&apos;+text+&apos;\n耗费时长&apos;+TIME+&apos;s,循环数是&apos;+ROUND)</span><br><span class="line">    </span><br><span class="line">        # 提取短信内容中的数字验证码</span><br><span class="line">        pat = &quot;校验码是 (.*?)。&quot;</span><br><span class="line">        IC = 0</span><br><span class="line">        IC = re.findall(pat, text)</span><br><span class="line">        if IC:</span><br><span class="line">            print(&quot;验证码是:\n&quot;+IC[0])</span><br><span class="line">            return IC[0]</span><br><span class="line">    else:</span><br><span class="line">        print(&apos;获取短信超时，错误代码是&apos;+text1+&apos;,循环数是&apos;+ROUND)</span><br><span class="line"></span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"># 释放号码</span><br><span class="line">url = &apos;http://api.fxhyd.cn/UserInterface.aspx?action=release&amp;token=&apos; + \</span><br><span class="line">    TOKEN+&apos;&amp;itemid=&apos;+ITEMID+&apos;&amp;mobile=&apos;+MOBILE</span><br><span class="line">RELEASE = request.urlopen(request.Request(</span><br><span class="line">    url=url, headers=header_dict)).read().decode(encoding=&apos;utf-8&apos;)</span><br><span class="line">if RELEASE == &apos;success&apos;:</span><br><span class="line">    print(&apos;号码成功释放&apos;)</span><br><span class="line"></span><br><span class="line"># 提取短信内容中的数字验证码</span><br><span class="line">pat = &quot;[0-9]+&quot;</span><br><span class="line">IC = 0</span><br><span class="line">IC = re.search(pat, text)</span><br><span class="line">if IC:</span><br><span class="line">    print(&quot;验证码是:\n&quot;+IC.group())</span><br><span class="line">else:</span><br><span class="line">    print(&quot;请重新设置表达式&quot;)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    # mobile = get_mobile()</span><br><span class="line">    # print(mobile)</span><br><span class="line">    # time.sleep(1)</span><br><span class="line">    release_mobile(&apos;18272124785&apos;)</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p>
<p>###超级鹰破解验证码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line"># coding:utf-8</span><br><span class="line"></span><br><span class="line">import requests</span><br><span class="line">from hashlib import md5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Chaojiying_Client(object):</span><br><span class="line"></span><br><span class="line">    def __init__(self, username, password, soft_id):</span><br><span class="line">        self.username = username</span><br><span class="line">        password =  password.encode(&apos;utf8&apos;)</span><br><span class="line">        self.password = md5(password).hexdigest()</span><br><span class="line">        self.soft_id = soft_id</span><br><span class="line">        self.base_params = &#123;</span><br><span class="line">            &apos;user&apos;: self.username,</span><br><span class="line">            &apos;pass2&apos;: self.password,</span><br><span class="line">            &apos;softid&apos;: self.soft_id,</span><br><span class="line">        &#125;</span><br><span class="line">        self.headers = &#123;</span><br><span class="line">            &apos;Connection&apos;: &apos;Keep-Alive&apos;,</span><br><span class="line">            &apos;User-Agent&apos;: &apos;Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)&apos;,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    def PostPic(self, im, codetype):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        im: 图片字节</span><br><span class="line">        codetype: 题目类型 参考 http://www.chaojiying.com/price.html</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        params = &#123;</span><br><span class="line">            &apos;codetype&apos;: codetype,</span><br><span class="line">        &#125;</span><br><span class="line">        params.update(self.base_params)</span><br><span class="line">        files = &#123;&apos;userfile&apos;: (&apos;ccc.jpg&apos;, im)&#125;</span><br><span class="line">        r = requests.post(&apos;http://upload.chaojiying.net/Upload/Processing.php&apos;, data=params, files=files, headers=self.headers)</span><br><span class="line">        return r.json()</span><br><span class="line"></span><br><span class="line">    def ReportError(self, im_id):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        im_id:报错题目的图片ID</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        params = &#123;</span><br><span class="line">            &apos;id&apos;: im_id,</span><br><span class="line">        &#125;</span><br><span class="line">        params.update(self.base_params)</span><br><span class="line">        r = requests.post(&apos;http://upload.chaojiying.net/Upload/ReportError.php&apos;, data=params, headers=self.headers)</span><br><span class="line">        return r.json()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main1(urlstr):</span><br><span class="line">    # print(urlstr)</span><br><span class="line">    chaojiying = Chaojiying_Client(&apos;carmack&apos;, &apos;Vff635241&apos;, &apos;96001&apos;) </span><br><span class="line">    im = open(urlstr, &apos;rb&apos;).read()                                                 </span><br><span class="line">    return chaojiying.PostPic(im, 1)[&apos;pic_str&apos;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    chaojiying = Chaojiying_Client(&apos;carmack&apos;, &apos;Vff635241&apos;, &apos;96001&apos;)</span><br><span class="line">    im = open(&apos;CaptchaImg.png&apos;, &apos;rb&apos;).read()</span><br><span class="line">    print(chaojiying.PostPic(im, 1902))</span><br></pre></td></tr></table></figure></p>
<h3 id="破解猫扑注册验证"><a href="#破解猫扑注册验证" class="headerlink" title="破解猫扑注册验证"></a>破解猫扑注册验证</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">from io import BytesIO</span><br><span class="line">from PIL import Image</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver import ActionChains</span><br><span class="line">from selenium.webdriver.common.by import By</span><br><span class="line">from selenium.webdriver.support.ui import WebDriverWait</span><br><span class="line">from selenium.webdriver.support import expected_conditions as EC</span><br><span class="line">import sms_helper</span><br><span class="line">import captcha_helper</span><br><span class="line"></span><br><span class="line">chrome_options = webdriver.ChromeOptions()</span><br><span class="line"># chrome_options.add_argument(&apos;--headless&apos;)</span><br><span class="line">browser = webdriver.Chrome(chrome_options=chrome_options)</span><br><span class="line"></span><br><span class="line">screen_width = 1000</span><br><span class="line">screen_height = 600</span><br><span class="line"></span><br><span class="line">browser.set_window_size(screen_width, screen_height)</span><br><span class="line"># 显式等待 针对某个节点的等待</span><br><span class="line">wait = WebDriverWait(browser, 5)</span><br><span class="line"></span><br><span class="line">user_name = &apos;一三一世银行卡撒谎&apos;</span><br><span class="line">user_passwd = &apos;qwer1234&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_page():</span><br><span class="line">    url = &apos;http://www.mop.com&apos;</span><br><span class="line">    browser.get(url)</span><br><span class="line">    button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, &apos;.mop-registration.mop-top-register&apos;)))</span><br><span class="line">    button.click()</span><br><span class="line"></span><br><span class="line">    time.sleep(5)</span><br><span class="line"></span><br><span class="line">    input_username = wait.until(EC.presence_of_element_located</span><br><span class="line">                       ((By.CSS_SELECTOR, &apos;.register-item.register-nickname .register-input input&apos;)))</span><br><span class="line">    input_username.clear()</span><br><span class="line">    input_username.send_keys(user_name)</span><br><span class="line"></span><br><span class="line">    input_passwd = wait.until(EC.presence_of_element_located</span><br><span class="line">                       ((By.CSS_SELECTOR, &apos;.register-item.register-password .register-input input&apos;)))</span><br><span class="line">    input_passwd.clear()</span><br><span class="line">    input_passwd.send_keys(user_passwd)</span><br><span class="line"></span><br><span class="line">    # 取手机号</span><br><span class="line">    mobile = sms_helper.get_mobile()</span><br><span class="line">    input_mobile = wait.until(EC.presence_of_element_located</span><br><span class="line">                       ((By.CSS_SELECTOR, &apos;.register-item.register-phone .register-input input&apos;)))</span><br><span class="line">    input_mobile.clear()</span><br><span class="line">    input_mobile.send_keys(mobile)</span><br><span class="line"></span><br><span class="line">    captcha_class_str = &apos;.register-item.register-yzm div.yzm-img&apos;</span><br><span class="line">    # 取验证码</span><br><span class="line">    captcha = captcha_helper.get_captcha(browser, captcha_class_str)</span><br><span class="line">    print(captcha)</span><br><span class="line"></span><br><span class="line">    # 取验证码输入框</span><br><span class="line">    input_captcha = wait.until(EC.presence_of_element_located</span><br><span class="line">                       ((By.CSS_SELECTOR, &apos;.register-item.register-yzm input&apos;)))</span><br><span class="line">    input_captcha.clear()</span><br><span class="line">    input_captcha.send_keys(captcha)</span><br><span class="line"></span><br><span class="line">    # 点击发送短信</span><br><span class="line">    button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, &apos;.register-msg-btn&apos;)))</span><br><span class="line">    button.click()</span><br><span class="line"></span><br><span class="line">    time.sleep(2)</span><br><span class="line">    # 提取短信验证码</span><br><span class="line">    sms_message = sms_helper.get_sms_message(mobile)</span><br><span class="line">    print(sms_message)</span><br><span class="line"></span><br><span class="line">    # 输入短信验证码</span><br><span class="line">    input_sms = wait.until(EC.presence_of_element_located</span><br><span class="line">                       ((By.CSS_SELECTOR, &apos;.register-item.register-msg input&apos;)))</span><br><span class="line">    input_sms.clear()</span><br><span class="line">    input_sms.send_keys(sms_message)</span><br><span class="line"></span><br><span class="line">    button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, &apos;.register-item.register-submit .btn-register&apos;)))</span><br><span class="line">    button.click()</span><br><span class="line"></span><br><span class="line">    return mobile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    mobile = &apos;&apos;</span><br><span class="line">    try:</span><br><span class="line">        mobile = get_page()</span><br><span class="line">    finally:</span><br><span class="line">        print(&apos;释放手机号&apos;)</span><br><span class="line">        # 释放手机号</span><br><span class="line">        sms_helper.release_mobile(mobile)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

            </div>

            <!-- Post Comments -->
            

        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
                <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
